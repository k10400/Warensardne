<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waren Sardne</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>
    <style>
        /* Make canvas responsive */
        #pdfCanvas {
            max-width: 100%;
            height: auto;
        }
       
        /* Style for buttons */
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
        }

        /* Media query to reduce button size on smaller screens */
        @media only screen and (max-width: 768px) {
            button {
                padding: 8px 16px;
                font-size: 14px;
            }
        }

        @media only screen and (max-width: 480px) {
            button {
                padding: 6px 12px;
                font-size: 12px;
            } 
    </style>

</head>
<body style="text-align: center;">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KNT4N2C3NE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KNT4N2C3NE');
</script>
<header>
    <img src="file.jpg" alt="Header Image" class="header-image">
    <h1>Waren Sardne</h1>

    <!-- Old Navbar (will be hidden on small screens) -->
    <span id="menuButton" onclick="openNav()" style="display: none;">☰ Åpne meny</span>

    <div class="navbar" id="oldNavbar">
        <a href="index.html">Om språket i Waren Sardne</a>
        <a href="page3.html">Se på forskjelige Waren Sardne aviser</a>
        <a href="page2.html">Kilder</a>
    </div>  

    <!-- New Curtain Menu -->
    <div id="myNav" class="overlay">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div class="overlay-content">
            <a href="index.html">Om språket i Waren Sardne</a>
            <a href="page3.html">Se på forskjelige Waren Sardne aviser</a>
            <a href="page2.html">Kilder</a>
        </div>
    </div>

  
</header>

<main>
    <h3 style="font-family: 'ModernTypewriter', sans-serif;">Arkiv over forskjellige Waren Sardne aviser.</h3>
    <p style="font-family: 'ModernTypewriter', sans-serif;">Dette er en oversikt over 5 forskjellige aviser fra Waren Sardne. Trykk på bilde av avisen og bla ned, da kan du lese gjennom den valgte avisen.</p>

    <section id="archive" class="centered">
        <div id="archiveItems">
            <!-- Archive items go here -->
             
<section id="archive" class="centered">
    <div id="archiveItems">
        <div class="archive-item">
            <div class="archive-content">
                <div class="title">Lørdag 15. januar 1910</div>
                <div class="description">Dette er første utgaven av avisen Waren Sardne.</div>
            </div>
            <div class="image-overlay">
                <img src="Bilde_2024-09-10_195743723.png" data-pdf="2024-09-10T1646_NB_generated.pdf" alt="First Edition Thumbnail" class="archive-image">
            </div>
        </div>
        <div class="archive-item">
            <div class="archive-content">
                <div class="title">Lørdag 12. November 1910</div>
            </div>
            <div class="image-overlay">
                <img src="Bilde_2024-09-10_195708388.png" data-pdf="2024-09-10T1650_NB_generated.pdf" alt="Item 2 Picture" class="archive-image">
            </div>
        </div>
        <div class="archive-item">
            <div class="archive-content">
                <div class="title">Fredag 20. Oktober 1922</div>
            </div>
            <div class="image-overlay">
                <img src="Bilde_2024-09-10_195631608.png" data-pdf="2024-09-10T1652_NB_generated.pdf" alt="Item 3 Picture" class="archive-image">
            </div>
        </div>
        <div class="archive-item">
            <div class="archive-content">
                <div class="title">Torsdag 20. juli 1922</div>
            </div>
            <div class="image-overlay">
                <img src="Bilde_2024-09-10_195537839.png" data-pdf="2024-09-10T1654_NB_generated.pdf" alt="Item 4 Picture" class="archive-image">
            </div>
        </div>
        <div class="archive-item">
            <div class="archive-content">
                <div class="title">Lørdag 1. Oktober 1927</div>
                <div class="description">Dette eksemplaret av Waren Sardne er en av de siste utgitte.</div>
            </div>
            <div class="image-overlay">
                <img src="Bilde_2024-09-10_195425696.png" data-pdf="2024-09-10T1656_NB_generated.pdf" alt="Item 5 Picture" class="archive-image">
            </div>
        </div>
    </div>
</section>
        </div>
    </section>
    
    <div id="pdfViewer" class="centered hidden" style="display: flex; flex-direction: column; align-items: center;">
        <span class="close-button" onclick="closePDFViewer()"></span>
        <div class="centered-content" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
            <canvas id="pdfCanvas"></canvas>
            <div class="pdf-controls" style="margin-top: 20px; text-align: center;">
                <button id="prevPage">Forrige side</button>
                <span id="pageInfo">Side <span id="currentPage">1</span> av <span id="totalPages">--</span></span>
                <button id="nextPage">Neste side</button>
            </div>
        </div>            
    </div>
  
    <button id="closeButton">Avslutt</button>
</main>

<footer>
    <p>&copy; Waren Sardne 2024</p>
</footer>

<script>
    let pdfDoc = null,
        currentPage = 1,
        totalPages = 0,
        pdfCanvas = document.getElementById('pdfCanvas'),
        ctx = pdfCanvas.getContext('2d');

    function getScaleForScreen() {
        // Adjust the scale based on the screen size
        const screenWidth = window.innerWidth;
        if (screenWidth <= 768) {
            return 0.75;  // Scale down for mobile
        } else {
            return 1.5;  // Normal scale for desktop
        }
    }

    function renderPage(pageNum) {
        pdfDoc.getPage(pageNum).then(function(page) {
            const scale = getScaleForScreen();  // Get scale dynamically
            const viewport = page.getViewport({ scale: scale });

            // Set canvas dimensions
            pdfCanvas.height = viewport.height;
            pdfCanvas.width = viewport.width;

            const renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };
            page.render(renderContext);

            document.getElementById('currentPage').textContent = pageNum;
        });
    }

    function queueRenderPage(pageNum) {
        if (pageNum >= 1 && pageNum <= totalPages) {
            renderPage(pageNum);
        }
    }

    function nextPage() {
        if (currentPage < totalPages) {
            currentPage++;
            queueRenderPage(currentPage);
        }
    }

    function prevPage() {
        if (currentPage > 1) {
            currentPage--;
            queueRenderPage(currentPage);
        }
    }

    function openNav() {
        document.getElementById("myNav").style.width = "100%";
    }

    function closeNav() {
        document.getElementById("myNav").style.width = "0%";
    }

    function toggleNavbars() {
        const width = window.innerWidth;
        const oldNavbar = document.getElementById('oldNavbar');
        const menuButton = document.getElementById('menuButton');

        if (width <= 768) {
            oldNavbar.style.display = 'none';  // Hide the old navbar on mobile
            menuButton.style.display = 'inline';  // Show the button to open the new menu
        } else {
            oldNavbar.style.display = 'block';  // Show the old navbar on larger screens
            menuButton.style.display = 'none';  // Hide the button on larger screens
            closeNav();  // Close the overlay if open
        }
    }

    window.onload = function() {
        toggleNavbars();

        const pdfViewer = document.getElementById('pdfViewer');
        pdfViewer.classList.add('hidden');

        const archiveImages = document.querySelectorAll('.archive-image');
        archiveImages.forEach(image => {
            image.addEventListener('click', () => {
                const pdfSrc = image.getAttribute('data-pdf');
                if (pdfSrc) {
                    const loadingTask = pdfjsLib.getDocument(pdfSrc);
                    loadingTask.promise.then(pdf => {
                        pdfDoc = pdf;
                        totalPages = pdf.numPages;
                        document.getElementById('totalPages').textContent = totalPages;
                        currentPage = 1;
                        renderPage(currentPage);

                        pdfViewer.classList.remove('hidden');
                    }).catch(error => {
                        console.error('Error loading PDF:', error);
                    });
                } else {
                    console.error('No PDF source found for this image.');
                }
            });
        });

        document.getElementById('nextPage').addEventListener('click', nextPage);
        document.getElementById('prevPage').addEventListener('click', prevPage);
        window.addEventListener('resize', toggleNavbars);
    };
</script>

</body>
</html>
